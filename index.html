<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D13 - –¢–æ–≤–∞—Ä—ã –¥–ª—è –¥–æ–º–∞ –∏ —Ä–µ–º–æ–Ω—Ç —Ç–µ—Ö–Ω–∏–∫–∏</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1a1a1a;
            --secondary: #333333;
            --accent: #666666;
            --light: #f8f9fa;
            --background: #ffffff;
            --text: #000000;
            --border: #e0e0e0;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --info: #17a2b8;
            --radius: 8px;
            --shadow: 0 4px 12px rgba(0,0,0,0.08);
            --transition: all 0.3s ease;
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        body {
            background-color: var(--background);
            color: var(--text);
            padding-top: 80px;
            font-family: 'Montserrat', sans-serif;
            line-height: 1.6;
            font-size: 16px;
            min-height: 100vh;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            transition: background 0.5s ease;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            line-height: 1.3;
            margin-bottom: 1rem;
        }

        h1 {
            font-size: 2.5rem;
        }

        h2 {
            font-size: 2rem;
        }

        h3 {
            font-size: 1.5rem;
        }

        p {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        /* Header */
        header {
            background: rgba(255, 255, 255, 0.95);
            color: #000;
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow);
            border-bottom: 1px solid var(--border);
            backdrop-filter: blur(10px);
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            cursor: pointer;
            letter-spacing: -1px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 2rem;
        }

        nav ul li a {
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            font-size: 1.1rem;
            padding: 0.5rem 0;
            position: relative;
            transition: var(--transition);
            cursor: pointer;
            white-space: nowrap;
        }

        nav ul li a:hover {
            color: var(--secondary);
        }

        nav ul li a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s;
        }

        nav ul li a:hover::after {
            width: 100%;
        }

        .user-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: flex-end;
        }

        .btn {
            padding: 0.7rem 1.5rem;
            border: 2px solid var(--primary);
            border-radius: var(--radius);
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: var(--transition);
            font-size: 1rem;
            font-weight: 500;
            background: white;
            color: var(--primary);
            white-space: nowrap;
        }

        .btn:hover {
            background: var(--primary);
            color: white;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            border: 2px solid var(--primary);
        }

        .btn-primary:hover {
            background: white;
            color: var(--primary);
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
            border: 2px solid var(--danger);
        }

        .btn-danger:hover {
            background: white;
            color: var(--danger);
        }

        .btn-success {
            background: var(--success);
            color: white;
            border: 2px solid var(--success);
        }

        .btn-success:hover {
            background: white;
            color: var(--success);
        }

        /* Main Content */
        .hero {
            background: rgba(255, 255, 255, 0.9);
            color: #000;
            padding: 6rem 0;
            text-align: center;
            border-bottom: 1px solid var(--border);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            margin: 2rem auto;
            max-width: 1200px;
            box-shadow: var(--shadow);
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            opacity: 0.9;
        }

        .section {
            padding: 4rem 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
            color: var(--text);
            font-size: 2.2rem;
            font-weight: 600;
            position: relative;
        }

        .section-title::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            margin: 15px auto;
            border-radius: 2px;
        }

        .services-grid, .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .service-card, .product-card {
            background: white;
            padding: 2rem;
            border-radius: var(--radius);
            text-align: center;
            transition: var(--transition);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            height: 100%;
            backdrop-filter: blur(10px);
        }

        .service-card:hover, .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 20px rgba(0,0,0,0.12);
        }

        .product-image, .category-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: var(--radius);
            margin-bottom: 1.5rem;
            border: 1px solid var(--border);
        }

        .category-image {
            height: 150px;
        }

        .service-icon {
            font-size: 3rem;
            margin-bottom: 1.5rem;
        }

        .product-price {
            font-size: 1.5rem;
            color: var(--primary);
            font-weight: bold;
            margin: 1.5rem 0;
        }

        .category-badge {
            display: inline-block;
            background: white;
            color: var(--primary);
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            margin: 0.5rem;
            border: 1px solid var(--border);
            font-weight: 500;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .category-card {
            background: white;
            padding: 2rem;
            border-radius: var(--radius);
            text-align: center;
            border: 1px solid var(--border);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            height: 100%;
            min-height: 350px;
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
            background-size: cover !important;
            background-position: center !important;
            background-repeat: no-repeat !important;
            position: relative;
            overflow: hidden;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 100%);
            transition: opacity 0.3s ease;
            z-index: 1;
        }

        .category-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .category-card:hover::before {
            background: linear-gradient(135deg, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.2) 100%);
        }

        .category-icon {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            flex-shrink: 0;
            position: relative;
            z-index: 2;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));
        }

        /* Text overflow protection */
        .text-truncate {
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
        }

        .product-name, .service-name, .category-name {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            min-height: 3em;
            line-height: 1.4;
            word-wrap: break-word;
            word-break: break-word;
            hyphens: auto;
            position: relative;
            z-index: 2;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .product-description, .service-description, .category-description {
            flex-grow: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            min-height: 4.5em;
            line-height: 1.5;
            word-wrap: break-word;
            word-break: break-word;
            hyphens: auto;
            position: relative;
            z-index: 2;
            color: rgba(255, 255, 255, 0.9);
        }

        .category-description {
            -webkit-line-clamp: 2;
            line-clamp: 2;
            min-height: 3em;
        }

        .category-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: relative;
            z-index: 2;
        }

        .category-button {
            margin-top: auto;
            padding-top: 1.5rem;
            position: relative;
            z-index: 2;
        }

        /* Image Upload Styles */
        .image-upload-container {
            margin-bottom: 1.5rem;
        }

        .image-preview {
            width: 100%;
            max-width: 300px;
            height: 200px;
            border: 2px dashed var(--border);
            border-radius: var(--radius);
            margin: 1rem auto;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background: var(--light);
            position: relative;
        }

        .image-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
        }

        .image-preview-placeholder {
            text-align: center;
            color: var(--accent);
            padding: 2rem;
        }

        .image-preview-placeholder i {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }

        .upload-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .upload-btn {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

        .upload-btn input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .image-actions {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-top: 1rem;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            padding: 1rem 2rem;
            border-radius: var(--radius);
            z-index: 3000;
            box-shadow: var(--shadow);
            color: white;
            font-weight: 500;
            border: none;
            font-size: 1rem;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notification.success { background: var(--success); }
        .notification.error { background: var(--danger); }
        .notification.info { background: var(--info); }

        /* Products Filter */
        .products-filter {
            margin-bottom: 2.5rem;
            text-align: center;
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        /* About Section */
        .about-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 2rem;
            border-radius: var(--radius);
            backdrop-filter: blur(10px);
        }

        /* Dashboard */
        .dashboard {
            max-width: 1000px;
            margin: 0 auto;
        }

        .dashboard-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .dashboard-card {
            background: white;
            padding: 2rem;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
        }

        .dashboard-card h3 {
            margin-bottom: 1.5rem;
            color: var(--primary);
            border-bottom: 2px solid var(--border);
            padding-bottom: 0.5rem;
        }

        .user-info-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
        }

        .user-info-label {
            font-weight: 500;
            color: var(--secondary);
        }

        .user-info-value {
            font-weight: 600;
        }

        .order-item {
            padding: 1rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            margin-bottom: 1rem;
            background: var(--light);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .order-status {
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-pending { background: var(--warning); color: black; }
        .status-completed { background: var(--success); color: white; }
        .status-cancelled { background: var(--danger); color: white; }

        /* Admin Panel - —Å–æ—Ö—Ä–∞–Ω–µ–Ω –∏–∑ homemaster */
        .admin-panel {
            position: fixed;
            top: 80px;
            right: 0;
            width: 350px;
            background: white;
            box-shadow: var(--shadow);
            border-left: 1px solid var(--border);
            padding: 1.5rem;
            z-index: 2000;
            transform: translateX(100%);
            transition: var(--transition);
            max-height: calc(100vh - 80px);
            overflow-y: auto;
            backdrop-filter: blur(10px);
        }

        .admin-panel.open {
            transform: translateX(0);
        }

        .admin-toggle {
            position: fixed;
            top: 100px;
            right: 0;
            background: var(--primary);
            color: white;
            padding: 0.7rem 1rem;
            border-radius: var(--radius) 0 0 var(--radius);
            cursor: pointer;
            z-index: 1999;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .admin-toggle:hover {
            background: var(--secondary);
        }

        .admin-section {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
        }

        .admin-section h3 {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 0.7rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-family: 'Montserrat', sans-serif;
            font-size: 1rem;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .color-picker {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .color-option.active {
            border-color: var(--primary);
        }

        .edit-mode-indicator {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: var(--warning);
            color: white;
            text-align: center;
            padding: 0.5rem;
            z-index: 2001;
            font-weight: 500;
        }

        /* Background Settings */
        .background-settings {
            background: #f8f9fa;
            padding: 15px;
            border-radius: var(--radius);
            margin-top: 10px;
        }

        .background-preview {
            width: 100%;
            height: 100px;
            border-radius: var(--radius);
            margin: 10px 0;
            border: 2px dashed var(--border);
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent);
        }

        .gradient-presets {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .gradient-preset {
            height: 40px;
            border-radius: 5px;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .gradient-preset:hover {
            border-color: var(--primary);
        }

        .file-upload {
            border: 2px dashed var(--border);
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.3s ease;
            margin: 10px 0;
        }

        .file-upload:hover {
            border-color: var(--primary);
        }

        .file-upload i {
            font-size: 2rem;
            color: var(--accent);
            margin-bottom: 10px;
        }

        /* Management Tables */
        .management-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            table-layout: fixed;
        }

        .management-table th,
        .management-table td {
            padding: 0.8rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
            vertical-align: top;
        }

        .management-table th {
            background: var(--light);
            font-weight: 600;
        }

        .management-table tr:hover {
            background: var(--light);
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            min-width: 180px;
        }

        .table-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 4px;
            border: 1px solid var(--border);
        }

        .table-actions-cell {
            min-width: 200px;
        }

        .table-name-cell {
            min-width: 200px;
            word-wrap: break-word;
        }

        .table-category-cell {
            min-width: 120px;
        }

        .table-price-cell {
            min-width: 100px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 3000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: var(--radius);
            max-width: 800px;
            width: 95%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--secondary);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        /* Cart Styles */
        .cart-icon {
            position: relative;
            cursor: pointer;
            font-size: 1.5rem;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .cart-panel {
            position: fixed;
            top: 80px;
            right: 0;
            width: 400px;
            background: white;
            box-shadow: var(--shadow);
            border-left: 1px solid var(--border);
            padding: 1.5rem;
            z-index: 2000;
            transform: translateX(100%);
            transition: var(--transition);
            max-height: calc(100vh - 80px);
            overflow-y: auto;
        }

        .cart-panel.open {
            transform: translateX(0);
        }

        .cart-item {
            display: flex;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid var(--border);
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: var(--radius);
            margin-right: 1rem;
        }

        .cart-item-details {
            flex-grow: 1;
        }

        .cart-item-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .cart-item-price {
            color: var(--primary);
            font-weight: bold;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-total {
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 2px solid var(--border);
            font-size: 1.2rem;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
        }

        .empty-cart {
            text-align: center;
            padding: 2rem;
            color: var(--accent);
        }

        /* Cart Page */
        .cart-page {
            max-width: 1000px;
            margin: 0 auto;
        }

        .cart-items-container {
            margin-bottom: 2rem;
        }

        .cart-page-item {
            display: flex;
            align-items: center;
            padding: 1.5rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            margin-bottom: 1rem;
            background: white;
            box-shadow: var(--shadow);
        }

        .cart-page-item-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: var(--radius);
            margin-right: 1.5rem;
        }

        .cart-page-item-details {
            flex-grow: 1;
        }

        .cart-page-item-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .cart-page-item-price {
            font-size: 1.1rem;
            color: var(--primary);
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .cart-page-item-quantity {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .cart-page-summary {
            background: white;
            padding: 2rem;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            position: sticky;
            top: 100px;
        }

        .cart-page-total {
            font-size: 1.5rem;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border);
        }

        /* Import Stats */
        .import-info {
            background: #f8f9fa;
            border-radius: var(--radius);
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--primary);
        }

        .import-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 10px;
            border-radius: 5px;
            background: white;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-added { color: var(--success); }
        .stat-updated { color: var(--primary); }
        .stat-errors { color: var(--danger); }

        /* Responsive */
        @media (max-width: 1024px) {
            .header-content {
                flex-wrap: wrap;
            }
            
            nav ul {
                order: 3;
                width: 100%;
                justify-content: center;
                margin-top: 1rem;
            }
            
            .user-actions {
                order: 2;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            nav ul {
                order: 2;
                width: auto;
                margin-top: 0;
            }
            
            .user-actions {
                order: 3;
                width: 100%;
                justify-content: center;
            }
            
            nav ul li {
                margin: 0.5rem 1rem;
            }
            
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .services-grid, .products-grid, .categories-grid {
                grid-template-columns: 1fr;
            }
            
            .admin-panel, .cart-panel {
                width: 100%;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .management-table {
                font-size: 0.9rem;
                display: block;
                overflow-x: auto;
            }
            
            .action-buttons {
                flex-direction: column;
                min-width: 140px;
            }
            
            .category-card {
                min-height: 320px;
                padding: 1.5rem;
            }
            
            .category-name {
                font-size: 1.2rem;
                min-height: 2.8em;
            }
            
            .category-description {
                font-size: 1rem;
                min-height: 2.8em;
            }
            
            .upload-buttons {
                flex-direction: column;
            }

            .table-image {
                width: 50px;
                height: 50px;
            }

            .modal-content {
                padding: 1rem;
                margin: 1rem;
                width: calc(100% - 2rem);
            }

            .cart-page-item {
                flex-direction: column;
                text-align: center;
            }

            .cart-page-item-image {
                margin-right: 0;
                margin-bottom: 1rem;
            }

            .cart-page-item-details {
                width: 100%;
            }

            .import-stats {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            nav ul li {
                margin: 0.3rem 0.7rem;
            }
            
            nav ul li a {
                font-size: 1rem;
            }
            
            .user-actions {
                flex-direction: column;
                width: 100%;
                gap: 0.7rem;
            }
            
            .user-actions .btn {
                width: 100%;
                text-align: center;
            }
            
            .categories-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .category-card {
                min-height: 300px;
                padding: 1.2rem;
            }
            
            .category-name {
                font-size: 1.1rem;
                min-height: 2.6em;
            }
            
            .category-description {
                font-size: 0.95rem;
                min-height: 2.6em;
            }

            .management-table {
                font-size: 0.8rem;
            }

            .action-buttons {
                gap: 0.3rem;
            }

            .btn-sm {
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
            }
            
            #userWelcome {
                text-align: center;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Edit Mode Indicator -->
    <div id="editModeIndicator" class="edit-mode-indicator" style="display: none;">
        –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∫–ª—é—á–µ–Ω
    </div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo" onclick="showHome()">D13</div>
                <nav>
                    <ul id="mainNav">
                        <li><a onclick="showHome()">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a onclick="showProductsPage()">–¢–æ–≤–∞—Ä—ã</a></li>
                        <li><a onclick="showServicesPage()">–£—Å–ª—É–≥–∏</a></li>
                        <li><a onclick="showCartPage()">–ö–æ—Ä–∑–∏–Ω–∞</a></li>
                        <li><a onclick="showAboutPage()">–û –Ω–∞—Å</a></li>
                    </ul>
                </nav>
                <div class="user-actions">
                    <span id="userWelcome"></span>
                    <div class="cart-icon" onclick="toggleCartPanel()">
                        üõí
                        <span class="cart-count" id="cartCount">0</span>
                    </div>
                    <button class="btn btn-outline" onclick="showAuthModal()" id="authBtn">–í–æ–π—Ç–∏</button>
                    <button class="btn" onclick="showDashboard()" id="dashboardBtn" style="display: none;">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</button>
                    <button class="btn" onclick="toggleAdminPanel()" id="adminBtn" style="display: none;">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∞–π—Ç</button>
                    <button class="btn btn-outline" onclick="logout()" id="logoutBtn" style="display: none;">–í—ã–π—Ç–∏</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Cart Panel -->
    <div class="cart-panel" id="cartPanel">
        <h3>–ö–æ—Ä–∑–∏–Ω–∞</h3>
        <div id="cartItems">
            <div class="empty-cart">
                <p>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
            </div>
        </div>
        <div class="cart-total" id="cartTotal" style="display: none;">
            <span>–ò—Ç–æ–≥–æ:</span>
            <span id="totalAmount">0 ‚ÇΩ</span>
        </div>
        <div class="modal-footer" id="cartActions" style="display: none;">
            <button class="btn btn-outline" onclick="toggleCartPanel()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏</button>
            <button class="btn btn-primary" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </div>
    </div>

    <!-- Admin Toggle -->
    <div class="admin-toggle" id="adminToggle" style="display: none;" onclick="toggleAdminPanel()">
        –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-section">
            <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</h3>
            <div class="form-group">
                <label for="editHeroTitle">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã</label>
                <input type="text" id="editHeroTitle" class="form-control" value="D13 - –í—Å—ë –¥–ª—è –¥–æ–º–∞ –∏ —Ä–µ–º–æ–Ω—Ç–∞">
            </div>
            <div class="form-group">
                <label for="editHeroText">–¢–µ–∫—Å—Ç –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã</label>
                <textarea id="editHeroText" class="form-control" rows="3">–¢–æ–≤–∞—Ä—ã –¥–ª—è –¥–æ–º–∞, —Ö–æ–∑—Ç–æ–≤–∞—Ä—ã –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–º–æ–Ω—Ç —Ç–µ—Ö–Ω–∏–∫–∏</textarea>
            </div>
            <div class="form-group">
                <label for="editAboutText">–¢–µ–∫—Å—Ç –æ –∫–æ–º–ø–∞–Ω–∏–∏</label>
                <textarea id="editAboutText" class="form-control" rows="5">D13 - —ç—Ç–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –ø–æ —Ä–µ–º–æ–Ω—Ç—É —Ç–µ—Ö–Ω–∏–∫–∏ –∏ –º–∞–≥–∞–∑–∏–Ω —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –¥–æ–º–∞. –ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞ —Ä—ã–Ω–∫–µ –±–æ–ª–µ–µ 5 –ª–µ—Ç –∏ –∑–∞—Å–ª—É–∂–∏–ª–∏ –¥–æ–≤–µ—Ä–∏–µ —Ç—ã—Å—è—á –∫–ª–∏–µ–Ω—Ç–æ–≤.

–ù–∞—à–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è - —Ä–µ–º–æ–Ω—Ç —ç–ª–µ–∫—Ç—Ä–æ–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, –∑–∞–º–µ–Ω–∞ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–æ–≤ –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ–¥–∞–∂–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤.</textarea>
            </div>
            <button class="btn btn-primary" onclick="saveContentChanges()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
        </div>

        <!-- –ù–û–í–´–ô –†–ê–ó–î–ï–õ: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–æ–Ω–∞ —Å–∞–π—Ç–∞ -->
        <div class="admin-section">
            <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–æ–Ω–∞ —Å–∞–π—Ç–∞</h3>
            <div class="form-group">
                <label>–¢–∏–ø —Ñ–æ–Ω–∞:</label>
                <select id="bgType" class="form-control" onchange="toggleBackgroundOptions()">
                    <option value="color">–°–ø–ª–æ—à–Ω–æ–π —Ü–≤–µ—Ç</option>
                    <option value="gradient">–ì—Ä–∞–¥–∏–µ–Ω—Ç</option>
                    <option value="image">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</option>
                    <option value="url">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</option>
                </select>
            </div>

            <div id="colorOptions">
                <div class="form-group">
                    <label>–¶–≤–µ—Ç —Ñ–æ–Ω–∞:</label>
                    <input type="color" id="bgColor" class="form-control" value="#ffffff">
                </div>
            </div>

            <div id="gradientOptions" style="display: none;">
                <div class="form-group">
                    <label>–¶–≤–µ—Ç 1:</label>
                    <input type="color" id="gradientColor1" class="form-control" value="#667eea">
                </div>
                <div class="form-group">
                    <label>–¶–≤–µ—Ç 2:</label>
                    <input type="color" id="gradientColor2" class="form-control" value="#764ba2">
                </div>
                <div class="gradient-presets">
                    <div class="gradient-preset" style="background: linear-gradient(135deg, #667eea, #764ba2);" onclick="setGradient('#667eea', '#764ba2')"></div>
                    <div class="gradient-preset" style="background: linear-gradient(135deg, #f093fb, #f5576c);" onclick="setGradient('#f093fb', '#f5576c')"></div>
                    <div class="gradient-preset" style="background: linear-gradient(135deg, #4facfe, #00f2fe);" onclick="setGradient('#4facfe', '#00f2fe')"></div>
                    <div class="gradient-preset" style="background: linear-gradient(135deg, #43e97b, #38f9d7);" onclick="setGradient('#43e97b', '#38f9d7')"></div>
                    <div class="gradient-preset" style="background: linear-gradient(135deg, #fa709a, #fee140);" onclick="setGradient('#fa709a', '#fee140')"></div>
                    <div class="gradient-preset" style="background: linear-gradient(135deg, #30cfd0, #330867);" onclick="setGradient('#30cfd0', '#330867')"></div>
                </div>
            </div>

            <div id="imageOptions" style="display: none;">
                <div class="form-group">
                    <label>–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:</label>
                    <div class="file-upload" onclick="document.getElementById('bgImageUpload').click()">
                        <i class="fas fa-image"></i>
                        <p>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
                        <input type="file" id="bgImageUpload" accept="image/*" style="display: none;" 
                               onchange="handleBackgroundImageUpload(this.files[0])">
                    </div>
                    <div class="background-preview" id="bgImagePreview">
                        –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                    </div>
                </div>
            </div>

            <div id="urlOptions" style="display: none;">
                <div class="form-group">
                    <label>URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</label>
                    <input type="text" id="bgImageUrl" class="form-control" placeholder="https://example.com/image.jpg">
                </div>
                <div class="form-group">
                    <button class="btn btn-sm btn-outline" onclick="previewBackgroundUrl()">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</button>
                </div>
                <div class="background-preview" id="bgUrlPreview">
                    –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ URL
                </div>
            </div>

            <button class="btn btn-success" onclick="applyBackgroundSettings()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–æ–Ω</button>
            <button class="btn btn-outline" onclick="resetBackground()">–°–±—Ä–æ—Å–∏—Ç—å –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É</button>
        </div>

        <div class="admin-section">
            <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</h3>
            <div class="form-group">
                <label>–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞</label>
                <div class="color-picker">
                    <div class="color-option active" style="background-color: #1a1a1a;" onclick="changeColorScheme('#1a1a1a', '#333333', '#666666')"></div>
                    <div class="color-option" style="background-color: #2c5530;" onclick="changeColorScheme('#2c5530', '#4a7c59', '#7da67d')"></div>
                    <div class="color-option" style="background-color: #1e3a5f;" onclick="changeColorScheme('#1e3a5f', '#345a8a', '#5a7caa')"></div>
                    <div class="color-option" style="background-color: #5a2d82;" onclick="changeColorScheme('#5a2d82', '#7a4da3', '#9a7dc3')"></div>
                </div>
            </div>
            <div class="form-group">
                <label for="fontSize">–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞</label>
                <select id="fontSize" class="form-control" onchange="changeFontSize(this.value)">
                    <option value="16px">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π</option>
                    <option value="18px">–ö—Ä—É–ø–Ω—ã–π</option>
                    <option value="14px">–ú–µ–ª–∫–∏–π</option>
                </select>
            </div>
            <div class="form-group">
                <label for="borderRadius">–°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤</label>
                <select id="borderRadius" class="form-control" onchange="changeBorderRadius(this.value)">
                    <option value="8px">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ</option>
                    <option value="0">–ü—Ä—è–º—ã–µ —É–≥–ª—ã</option>
                    <option value="16px">–°–∏–ª—å–Ω–æ–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ</option>
                </select>
            </div>
            <button class="btn btn-primary" onclick="saveDesignChanges()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</button>
        </div>

        <div class="admin-section">
            <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—á—Ç—ã</h3>
            <div class="form-group">
                <label for="adminEmail">Email –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞—è–≤–∫–∞—Ö</label>
                <input type="email" id="adminEmail" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ email –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞—è–≤–æ–∫">
            </div>
            <button class="btn btn-primary" onclick="saveAdminEmail()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—á—Ç—ã</button>
        </div>

        <!-- –ù–û–í–´–ô –†–ê–ó–î–ï–õ: –ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤ -->
        <div class="admin-section">
            <h3>–ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤</h3>
            <div class="form-group">
                <label>–ò–º–ø–æ—Ä—Ç –∏–∑ —Ñ–∞–π–ª–∞ (CSV/XLSX):</label>
                <div class="file-upload" onclick="document.getElementById('fileImport').click()">
                    <i class="fas fa-file-import"></i>
                    <p>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞</p>
                    <input type="file" id="fileImport" accept=".csv,.xlsx" style="display: none;" 
                           onchange="importProducts(this.files[0])">
                </div>
                <small style="color: var(--accent); display: block; margin-top: 10px;">
                    –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: CSV, XLSX (Excel)<br>
                    –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: –Ω–∞–∑–≤–∞–Ω–∏–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Ü–µ–Ω–∞
                </small>
            </div>
        </div>

        <div class="admin-section">
            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏</h3>
            <button class="btn btn-primary" onclick="showAddProductModal()">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
            <button class="btn" onclick="showProductList()">–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</button>
        </div>

        <div class="admin-section">
            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∞–º–∏</h3>
            <button class="btn btn-primary" onclick="showAddServiceModal()">–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É</button>
            <button class="btn" onclick="showServiceList()">–°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥</button>
        </div>

        <div class="admin-section">
            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏</h3>
            <button class="btn btn-primary" onclick="showAddCategoryModal()">–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
            <button class="btn" onclick="showCategoryList()">–°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π</button>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container">
        <!-- Home Section -->
        <section id="homeSection">
            <div class="hero">
                <h1 id="heroTitle">D13 - –í—Å—ë –¥–ª—è –¥–æ–º–∞ –∏ —Ä–µ–º–æ–Ω—Ç–∞</h1>
                <p id="heroText">–¢–æ–≤–∞—Ä—ã –¥–ª—è –¥–æ–º–∞, —Ö–æ–∑—Ç–æ–≤–∞—Ä—ã –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–º–æ–Ω—Ç —Ç–µ—Ö–Ω–∏–∫–∏</p>
                <button class="btn btn-primary" style="margin-top: 2rem;" onclick="showProductsPage()">–°–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–≤–∞—Ä—ã</button>
            </div>

            <!-- Dynamic Sections -->
            <div id="dynamicSections">
                <!-- Sections will be loaded here -->
            </div>
        </section>

        <!-- Products Page -->
        <section id="productsPage" style="display: none;" class="section">
            <h2 class="section-title">–í—Å–µ —Ç–æ–≤–∞—Ä—ã</h2>
            <div class="products-filter">
                <div class="filter-buttons" id="categoriesFilter">
                    <button class="btn" onclick="filterProducts('all')">–í—Å–µ —Ç–æ–≤–∞—Ä—ã</button>
                    <!-- Categories filter buttons will be loaded here -->
                </div>
                <div style="margin-top: 1rem;">
                    <input type="text" id="productSearch" class="form-control" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤..." 
                           onkeyup="searchProducts()" style="max-width: 300px; display: inline-block;">
                </div>
            </div>
            <div class="products-grid" id="allProducts">
                <!-- All products will be loaded here -->
            </div>
        </section>

        <!-- Services Page -->
        <section id="servicesPage" style="display: none;" class="section">
            <h2 class="section-title">–ù–∞—à–∏ —É—Å–ª—É–≥–∏</h2>
            <div class="services-grid" id="allServices">
                <!-- All services will be loaded here -->
            </div>
        </section>

        <!-- Cart Page -->
        <section id="cartPage" style="display: none;" class="section">
            <h2 class="section-title">–ö–æ—Ä–∑–∏–Ω–∞</h2>
            <div class="cart-page">
                <div class="cart-items-container" id="cartPageItems">
                    <div class="empty-cart">
                        <p>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
                        <button class="btn btn-primary" onclick="showProductsPage()">–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º</button>
                    </div>
                </div>
                
                <div class="cart-page-summary" id="cartPageSummary" style="display: none;">
                    <div class="cart-page-total">
                        <span>–ò—Ç–æ–≥–æ:</span>
                        <span id="cartPageTotalAmount">0 ‚ÇΩ</span>
                    </div>
                    <button class="btn btn-primary" style="width: 100%;" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
                    <button class="btn btn-outline" style="width: 100%; margin-top: 1rem;" onclick="showProductsPage()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏</button>
                </div>
            </div>
        </section>

        <!-- About Page -->
        <section id="aboutPage" style="display: none;" class="section">
            <h2 class="section-title">–û –Ω–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏</h2>
            <div class="about-content">
                <p id="aboutText">
                    D13 - —ç—Ç–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –ø–æ —Ä–µ–º–æ–Ω—Ç—É —Ç–µ—Ö–Ω–∏–∫–∏ –∏ –º–∞–≥–∞–∑–∏–Ω —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –¥–æ–º–∞. 
                    –ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞ —Ä—ã–Ω–∫–µ –±–æ–ª–µ–µ 5 –ª–µ—Ç –∏ –∑–∞—Å–ª—É–∂–∏–ª–∏ –¥–æ–≤–µ—Ä–∏–µ —Ç—ã—Å—è—á –∫–ª–∏–µ–Ω—Ç–æ–≤.
                </p>
                <p>
                    –ù–∞—à–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è - —Ä–µ–º–æ–Ω—Ç —ç–ª–µ–∫—Ç—Ä–æ–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, –∑–∞–º–µ–Ω–∞ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–æ–≤ –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞, 
                    –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ–¥–∞–∂–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤.
                </p>
            </div>
            
            <div style="margin-top: 3rem;">
                <h3 style="text-align: center; margin-bottom: 2rem;">–ù–∞—à–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</h3>
                <div class="services-grid">
                    <div class="service-card">
                        <div class="service-icon">‚ö°</div>
                        <h3 class="service-name">–ë—ã—Å—Ç—Ä—ã–π —Ä–µ–º–æ–Ω—Ç</h3>
                        <p class="service-description">–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ä–µ–º–æ–Ω—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ–º –≤ —Ç–µ—á–µ–Ω–∏–µ 1-2 –¥–Ω–µ–π</p>
                    </div>
                    <div class="service-card">
                        <div class="service-icon">üîß</div>
                        <h3 class="service-name">–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—á–∞—Å—Ç–∏</h3>
                        <p class="service-description">–ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏–µ</p>
                    </div>
                    <div class="service-card">
                        <div class="service-icon">üí∞</div>
                        <h3 class="service-name">–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ü–µ–Ω—ã</h3>
                        <p class="service-description">–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ —Ü–µ–Ω—ã –Ω–∞ –≤—Å–µ –≤–∏–¥—ã —É—Å–ª—É–≥</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dashboard Page -->
        <section id="dashboardPage" style="display: none;" class="section">
            <div class="dashboard">
                <div class="dashboard-header">
                    <h2 class="section-title">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
                    <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ –∑–∞–∫–∞–∑–∞–º–∏</p>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                        <div id="userInfo">
                            <!-- User info will be loaded here -->
                        </div>
                        <button class="btn btn-sm" onclick="showEditProfileModal()">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
                    </div>

                    <div class="dashboard-card">
                        <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                        <div class="user-info-item">
                            <span class="user-info-label">–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤:</span>
                            <span class="user-info-value" id="totalOrders">0</span>
                        </div>
                        <div class="user-info-item">
                            <span class="user-info-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ:</span>
                            <span class="user-info-value" id="completedOrders">0</span>
                        </div>
                        <div class="user-info-item">
                            <span class="user-info-label">–í –æ–±—Ä–∞–±–æ—Ç–∫–µ:</span>
                            <span class="user-info-value" id="pendingOrders">0</span>
                        </div>
                        <div class="user-info-item">
                            <span class="user-info-label">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</span>
                            <span class="user-info-value" id="registrationDate">-</span>
                        </div>
                    </div>
                </div>

                <div class="dashboard-card">
                    <h3>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</h3>
                    <div id="ordersHistory">
                        <p style="text-align: center; color: var(--accent);">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</p>
                    </div>
                </div>

                <div class="dashboard-card">
                    <h3>–ò–∑–±—Ä–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã</h3>
                    <div id="favoriteProducts">
                        <p style="text-align: center; color: var(--accent);">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Service Request Modal -->
    <div class="modal" id="serviceRequestModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–ó–∞—è–≤–∫–∞ –Ω–∞ —É—Å–ª—É–≥—É</h3>
                <button class="close-modal" onclick="closeModal('serviceRequestModal')">&times;</button>
            </div>
            <div class="form-group">
                <label for="serviceRequestName">–í–∞—à–µ –∏–º—è *</label>
                <input type="text" id="serviceRequestName" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è">
            </div>
            <div class="form-group">
                <label for="serviceRequestPhone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                <input type="tel" id="serviceRequestPhone" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω">
            </div>
            <div class="form-group">
                <label for="serviceRequestEmail">Email</label>
                <input type="email" id="serviceRequestEmail" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email">
            </div>
            <div class="form-group">
                <label for="serviceRequestMessage">–°–æ–æ–±—â–µ–Ω–∏–µ</label>
                <textarea id="serviceRequestMessage" class="form-control form-textarea" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –∏–ª–∏ –≤–∞—à–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è"></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('serviceRequestModal')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="submitServiceRequest()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal" id="editProfileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</h3>
                <button class="close-modal" onclick="closeModal('editProfileModal')">&times;</button>
            </div>
            <div class="form-group">
                <label for="editName">–ò–º—è</label>
                <input type="text" id="editName" class="form-control">
            </div>
            <div class="form-group">
                <label for="editEmail">Email</label>
                <input type="email" id="editEmail" class="form-control">
            </div>
            <div class="form-group">
                <label for="editPhone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                <input type="tel" id="editPhone" class="form-control">
            </div>
            <div class="form-group">
                <label for="editPassword">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –º–µ–Ω—è—Ç—å)</label>
                <input type="password" id="editPassword" class="form-control">
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('editProfileModal')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="saveProfileChanges()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            </div>
        </div>
    </div>

    <!-- Product Management Modal -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productModalTitle">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h3>
                <button class="close-modal" onclick="closeModal('productModal')">&times;</button>
            </div>
            
            <div class="image-upload-container">
                <label>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</label>
                <div class="image-preview" id="productImagePreview">
                    <div class="image-preview-placeholder">
                        <i>üì∑</i>
                        <div>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ</div>
                    </div>
                </div>
                <div class="upload-buttons">
                    <button class="btn btn-sm upload-btn">
                        üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ
                        <input type="file" id="productImageUpload" accept="image/*" onchange="handleProductImageUpload(event)">
                    </button>
                    <button class="btn btn-sm btn-outline" onclick="clearProductImage()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                </div>
                <div class="image-actions">
                    <button class="btn btn-sm btn-outline" onclick="useDefaultProductImage()">üñºÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ</button>
                </div>
            </div>

            <div class="form-group">
                <label for="productName">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</label>
                <input type="text" id="productName" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞">
            </div>
            <div class="form-group">
                <label for="productCategory">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                <select id="productCategory" class="form-control">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                </select>
            </div>
            <div class="form-group">
                <label for="productPrice">–¶–µ–Ω–∞ (‚ÇΩ)</label>
                <input type="number" id="productPrice" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É">
            </div>
            <div class="form-group">
                <label for="productStock">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ</label>
                <input type="number" id="productStock" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ">
            </div>
            <div class="form-group">
                <label for="productDescription">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="productDescription" class="form-control form-textarea" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞"></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('productModal')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="saveProduct()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
            </div>
        </div>
    </div>

    <!-- Service Management Modal -->
    <div class="modal" id="serviceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="serviceModalTitle">–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É</h3>
                <button class="close-modal" onclick="closeModal('serviceModal')">&times;</button>
            </div>
            <div class="form-group">
                <label for="serviceName">–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏</label>
                <input type="text" id="serviceName" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏">
            </div>
            <div class="form-group">
                <label for="serviceIcon">–ò–∫–æ–Ω–∫–∞ (—ç–º–æ–¥–∑–∏)</label>
                <input type="text" id="serviceIcon" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ —ç–º–æ–¥–∑–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä: üîß">
            </div>
            <div class="form-group">
                <label for="serviceDescription">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="serviceDescription" class="form-control form-textarea" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏"></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('serviceModal')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="saveService()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —É—Å–ª—É–≥—É</button>
            </div>
        </div>
    </div>

    <!-- Category Management Modal -->
    <div class="modal" id="categoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="categoryModalTitle">–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</h3>
                <button class="close-modal" onclick="closeModal('categoryModal')">&times;</button>
            </div>
            
            <div class="image-upload-container">
                <label>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</label>
                <div class="image-preview" id="categoryImagePreview">
                    <div class="image-preview-placeholder">
                        <i>üì∑</i>
                        <div>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ</div>
                    </div>
                </div>
                <div class="upload-buttons">
                    <button class="btn btn-sm upload-btn">
                        üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ
                        <input type="file" id="categoryImageUpload" accept="image/*" onchange="handleCategoryImageUpload(event)">
                    </button>
                    <button class="btn btn-sm btn-outline" onclick="clearCategoryImage()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                </div>
                <div class="image-actions">
                    <button class="btn btn-sm btn-outline" onclick="useDefaultCategoryImage()">üñºÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ</button>
                </div>
            </div>

            <div class="form-group">
                <label for="categoryName">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</label>
                <input type="text" id="categoryName" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏">
            </div>
            <div class="form-group">
                <label for="categoryIcon">–ò–∫–æ–Ω–∫–∞ (—ç–º–æ–¥–∑–∏)</label>
                <input type="text" id="categoryIcon" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ —ç–º–æ–¥–∑–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä: üîß">
            </div>
            <div class="form-group">
                <label for="categoryDescription">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="categoryDescription" class="form-control form-textarea" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"></textarea>
            </div>
            
            <!-- –ù–û–í–´–ï –ù–ê–°–¢–†–û–ô–ö–ò –§–û–ù–ê –ö–ê–¢–ï–ì–û–†–ò–ò -->
            <div class="background-settings">
                <h4>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–æ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h4>
                <div class="form-group">
                    <label>–¢–∏–ø —Ñ–æ–Ω–∞:</label>
                    <select id="categoryBgType" class="form-control" onchange="toggleCategoryBackgroundOptions()">
                        <option value="gradient">–ì—Ä–∞–¥–∏–µ–Ω—Ç</option>
                        <option value="color">–°–ø–ª–æ—à–Ω–æ–π —Ü–≤–µ—Ç</option>
                        <option value="image">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</option>
                    </select>
                </div>
                
                <div id="categoryColorOptions" style="display: none;">
                    <div class="form-group">
                        <label>–¶–≤–µ—Ç —Ñ–æ–Ω–∞:</label>
                        <input type="color" id="categoryBgColor" class="form-control" value="#667eea">
                    </div>
                </div>
                
                <div id="categoryGradientOptions">
                    <div class="form-group">
                        <label>–¶–≤–µ—Ç 1:</label>
                        <input type="color" id="categoryGradientColor1" class="form-control" value="#667eea">
                    </div>
                    <div class="form-group">
                        <label>–¶–≤–µ—Ç 2:</label>
                        <input type="color" id="categoryGradientColor2" class="form-control" value="#764ba2">
                    </div>
                </div>
                
                <div id="categoryImageBgOptions" style="display: none;">
                    <div class="form-group">
                        <label>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ–Ω–∞:</label>
                        <div class="file-upload" onclick="document.getElementById('categoryBgImageUpload').click()">
                            <i class="fas fa-image"></i>
                            <p>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ–Ω–∞</p>
                            <input type="file" id="categoryBgImageUpload" accept="image/*" style="display: none;" 
                                   onchange="handleCategoryBackgroundImageUpload(event)">
                        </div>
                        <div class="background-preview" id="categoryBgPreview">
                            –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('categoryModal')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="saveCategory()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
            </div>
        </div>
    </div>

    <!-- Management List Modals -->
    <div class="modal" id="productListModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏</h3>
                <button class="close-modal" onclick="closeModal('productListModal')">&times;</button>
            </div>
            <div style="overflow-x: auto;">
                <table class="management-table">
                    <thead>
                        <tr>
                            <th style="width: 80px;">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</th>
                            <th style="min-width: 200px;">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th style="width: 100px;">–¶–µ–Ω–∞</th>
                            <th style="width: 120px;">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                            <th style="width: 200px;">–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="productListTable">
                        <!-- Product list will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="modal" id="serviceListModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∞–º–∏</h3>
                <button class="close-modal" onclick="closeModal('serviceListModal')">&times;</button>
            </div>
            <div style="overflow-x: auto;">
                <table class="management-table">
                    <thead>
                        <tr>
                            <th style="min-width: 200px;">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th style="width: 80px;">–ò–∫–æ–Ω–∫–∞</th>
                            <th style="width: 200px;">–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="serviceListTable">
                        <!-- Service list will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="modal" id="categoryListModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏</h3>
                <button class="close-modal" onclick="closeModal('categoryListModal')">&times;</button>
            </div>
            <div style="overflow-x: auto;">
                <table class="management-table">
                    <thead>
                        <tr>
                            <th style="width: 80px;">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</th>
                            <th style="min-width: 200px;">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th style="width: 80px;">–ò–∫–æ–Ω–∫–∞</th>
                            <th style="width: 200px;">–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="categoryListTable">
                        <!-- Category list will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // ==================== –û–°–ù–û–í–ù–´–ï –î–ê–ù–ù–´–ï ====================
        let users = JSON.parse(localStorage.getItem('users')) || [];
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let products = JSON.parse(localStorage.getItem('products')) || [];
        let services = JSON.parse(localStorage.getItem('services')) || [];
        let categories = JSON.parse(localStorage.getItem('categories')) || [];
        let orders = JSON.parse(localStorage.getItem('orders')) || [];
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let serviceRequests = JSON.parse(localStorage.getItem('serviceRequests')) || [];
        let siteSettings = JSON.parse(localStorage.getItem('siteSettings')) || {};
        let adminEmail = localStorage.getItem('adminEmail') || '';
        let editMode = false;
        let editingProductId = null;
        let editingServiceId = null;
        let editingCategoryId = null;
        let currentServiceId = null;
        
        // Image storage
        let productImageData = null;
        let categoryImageData = null;
        let bgImageData = null;
        let categoryBgImageData = null;

        // –ù–û–í–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï –î–õ–Ø –§–û–ù–ê
        let currentBackgroundType = siteSettings.backgroundType || 'color';
        let currentBackgroundColor = siteSettings.backgroundColor || '#ffffff';
        let currentGradientColor1 = siteSettings.gradientColor1 || '#667eea';
        let currentGradientColor2 = siteSettings.gradientColor2 || '#764ba2';
        let currentBackgroundImage = siteSettings.backgroundImage || '';
        let currentBackgroundUrl = siteSettings.backgroundUrl || '';

        // Initialize default data
        function initData() {
            if (users.length === 0) {
                users.push({
                    id: 1,
                    name: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä',
                    email: 'admin@homemaster.ru',
                    password: 'admin123',
                    phone: '+7 (923) 753-36-06',
                    role: 'admin',
                    registrationDate: new Date().toISOString()
                });
                saveData('users', users);
            }

            if (categories.length === 0) {
                categories = [
                    {
                        id: 1,
                        name: '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä—ã',
                        icon: 'üîã',
                        description: '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä—ã –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞',
                        image: 'https://via.placeholder.com/300x200?text=–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä—ã',
                        backgroundType: 'gradient',
                        backgroundColor: '#667eea',
                        gradientColor1: '#667eea',
                        gradientColor2: '#764ba2',
                        backgroundImage: ''
                    },
                    {
                        id: 2,
                        name: '–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã',
                        icon: 'üõ†Ô∏è',
                        description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏ –±—ã—Ç–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã',
                        image: 'https://via.placeholder.com/300x200?text=–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã',
                        backgroundType: 'gradient',
                        backgroundColor: '#667eea',
                        gradientColor1: '#f093fb',
                        gradientColor2: '#f5576c',
                        backgroundImage: ''
                    }
                ];
                saveData('categories', categories);
            }

            if (services.length === 0) {
                services = [
                    {
                        id: 1,
                        name: '–†–µ–º–æ–Ω—Ç —ç–ª–µ–∫—Ç—Ä–æ–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞',
                        icon: 'üîß',
                        description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–º–æ–Ω—Ç –¥—Ä–µ–ª–µ–π, —à—É—Ä—É–ø–æ–≤–µ—Ä—Ç–æ–≤, –ø–µ—Ä—Ñ–æ—Ä–∞—Ç–æ—Ä–æ–≤'
                    },
                    {
                        id: 2,
                        name: '–ó–∞–º–µ–Ω–∞ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–æ–≤',
                        icon: 'üîã',
                        description: '–†–µ–º–æ–Ω—Ç –ê–ö–ë –¥–ª—è —Å–∞–º–æ–∫–∞—Ç–æ–≤, —ç–ª–µ–∫—Ç—Ä–æ–≤–µ–ª–æ—Å–∏–ø–µ–¥–æ–≤, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞'
                    }
                ];
                saveData('services', services);
            }

            if (products.length === 0) {
                products = [
                    {
                        id: 1,
                        name: '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä –¥–ª—è —à—É—Ä—É–ø–æ–≤–µ—Ä—Ç–∞ 18V',
                        category: 1,
                        price: 2500,
                        stock: 15,
                        description: '–õ–∏—Ç–∏–π-–∏–æ–Ω–Ω—ã–π –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞',
                        image: 'https://via.placeholder.com/300x200?text=–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä+18V',
                        parameters: {
                            '–Å–º–∫–æ—Å—Ç—å': '2000 mAh',
                            '–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ': '18V',
                            '–¢–∏–ø': 'Li-Ion'
                        },
                        enabled: true
                    },
                    {
                        id: 2,
                        name: '–ù–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ 150 –ø—Ä–µ–¥–º–µ—Ç–æ–≤',
                        category: 2,
                        price: 4500,
                        stock: 8,
                        description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –¥–æ–º–∞',
                        image: 'https://via.placeholder.com/300x200?text=–ù–∞–±–æ—Ä+–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤',
                        parameters: {
                            '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤': '150',
                            '–ú–∞—Ç–µ—Ä–∏–∞–ª': '–•—Ä–æ–º-–≤–∞–Ω–∞–¥–∏–µ–≤–∞—è —Å—Ç–∞–ª—å',
                            '–ö–µ–π—Å': '–ü–ª–∞—Å—Ç–∏–∫–æ–≤—ã–π'
                        },
                        enabled: true
                    }
                ];
                saveData('products', products);
            }

            // Create sample orders for demo
            if (orders.length === 0 && users.length > 0) {
                orders = [
                    {
                        id: 1,
                        userId: 1,
                        products: [
                            { id: 1, name: '–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä –¥–ª—è —à—É—Ä—É–ø–æ–≤–µ—Ä—Ç–∞ 18V', quantity: 1, price: 2500 }
                        ],
                        total: 2500,
                        status: 'completed',
                        date: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
                        address: '—É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 123'
                    }
                ];
                saveData('orders', orders);
            }

            // Load admin email
            adminEmail = localStorage.getItem('adminEmail') || '';
            document.getElementById('adminEmail').value = adminEmail;

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–æ–Ω–∞
            loadBackgroundSettings();
            
            // Load site settings
            loadSiteSettings();
            updateUI();
            loadHomePage();
            updateCartCount();
        }

        function saveData(key, data) {
            localStorage.setItem(key, JSON.stringify(data));
        }

        // ==================== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –§–û–ù–ê –°–ê–ô–¢–ê ====================
        function loadBackgroundSettings() {
            const bgType = siteSettings.backgroundType || 'color';
            document.getElementById('bgType').value = bgType;
            
            if (bgType === 'color') {
                document.getElementById('bgColor').value = siteSettings.backgroundColor || '#ffffff';
            } else if (bgType === 'gradient') {
                document.getElementById('gradientColor1').value = siteSettings.gradientColor1 || '#667eea';
                document.getElementById('gradientColor2').value = siteSettings.gradientColor2 || '#764ba2';
            } else if (bgType === 'image' && siteSettings.backgroundImage) {
                const preview = document.getElementById('bgImagePreview');
                preview.style.backgroundImage = `url('${siteSettings.backgroundImage}')`;
                preview.innerHTML = '';
            } else if (bgType === 'url' && siteSettings.backgroundUrl) {
                document.getElementById('bgImageUrl').value = siteSettings.backgroundUrl;
                const preview = document.getElementById('bgUrlPreview');
                preview.style.backgroundImage = `url('${siteSettings.backgroundUrl}')`;
                preview.innerHTML = '';
            }
            
            toggleBackgroundOptions();
            applyBackgroundSettings();
        }

        function toggleBackgroundOptions() {
            const bgType = document.getElementById('bgType').value;
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –æ–ø—Ü–∏–∏
            document.getElementById('colorOptions').style.display = 'none';
            document.getElementById('gradientOptions').style.display = 'none';
            document.getElementById('imageOptions').style.display = 'none';
            document.getElementById('urlOptions').style.display = 'none';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–µ –æ–ø—Ü–∏–∏
            if (bgType === 'color') {
                document.getElementById('colorOptions').style.display = 'block';
            } else if (bgType === 'gradient') {
                document.getElementById('gradientOptions').style.display = 'block';
            } else if (bgType === 'image') {
                document.getElementById('imageOptions').style.display = 'block';
            } else if (bgType === 'url') {
                document.getElementById('urlOptions').style.display = 'block';
            }
        }

        function setGradient(color1, color2) {
            document.getElementById('gradientColor1').value = color1;
            document.getElementById('gradientColor2').value = color2;
        }

        function handleBackgroundImageUpload(file) {
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                bgImageData = e.target.result;
                const preview = document.getElementById('bgImagePreview');
                preview.style.backgroundImage = `url('${bgImageData}')`;
                preview.innerHTML = '';
                preview.classList.add('has-image');
            };
            reader.readAsDataURL(file);
        }

        function previewBackgroundUrl() {
            const url = document.getElementById('bgImageUrl').value;
            if (url) {
                const preview = document.getElementById('bgUrlPreview');
                preview.style.backgroundImage = `url('${url}')`;
                preview.innerHTML = '';
                preview.classList.add('has-image');
            }
        }

        function applyBackgroundSettings() {
            const bgType = document.getElementById('bgType').value;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            siteSettings.backgroundType = bgType;
            
            if (bgType === 'color') {
                const color = document.getElementById('bgColor').value;
                document.body.style.background = color;
                document.body.style.backgroundSize = 'auto';
                siteSettings.backgroundColor = color;
            } else if (bgType === 'gradient') {
                const color1 = document.getElementById('gradientColor1').value;
                const color2 = document.getElementById('gradientColor2').value;
                document.body.style.background = `linear-gradient(135deg, ${color1}, ${color2})`;
                document.body.style.backgroundSize = 'auto';
                siteSettings.gradientColor1 = color1;
                siteSettings.gradientColor2 = color2;
            } else if (bgType === 'image') {
                if (bgImageData) {
                    document.body.style.background = `url('${bgImageData}') center/cover fixed`;
                    siteSettings.backgroundImage = bgImageData;
                } else if (siteSettings.backgroundImage) {
                    document.body.style.background = `url('${siteSettings.backgroundImage}') center/cover fixed`;
                }
            } else if (bgType === 'url') {
                const url = document.getElementById('bgImageUrl').value;
                if (url) {
                    document.body.style.background = `url('${url}') center/cover fixed`;
                    siteSettings.backgroundUrl = url;
                }
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            localStorage.setItem('siteSettings', JSON.stringify(siteSettings));
            showNotification('–§–æ–Ω —Å–∞–π—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω!', 'success');
        }

        function resetBackground() {
            document.body.style.background = '#ffffff';
            document.body.style.backgroundSize = 'auto';
            siteSettings.backgroundType = 'color';
            siteSettings.backgroundColor = '#ffffff';
            localStorage.setItem('siteSettings', JSON.stringify(siteSettings));
            loadBackgroundSettings();
            showNotification('–§–æ–Ω —Å–±—Ä–æ—à–µ–Ω –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É', 'info');
        }

        // ==================== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –§–û–ù–ê –ö–ê–¢–ï–ì–û–†–ò–ô ====================
        function toggleCategoryBackgroundOptions() {
            const bgType = document.getElementById('categoryBgType').value;
            
            document.getElementById('categoryColorOptions').style.display = 'none';
            document.getElementById('categoryGradientOptions').style.display = 'none';
            document.getElementById('categoryImageBgOptions').style.display = 'none';
            
            if (bgType === 'color') {
                document.getElementById('categoryColorOptions').style.display = 'block';
            } else if (bgType === 'gradient') {
                document.getElementById('categoryGradientOptions').style.display = 'block';
            } else if (bgType === 'image') {
                document.getElementById('categoryImageBgOptions').style.display = 'block';
            }
        }

        function handleCategoryBackgroundImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    categoryBgImageData = e.target.result;
                    const preview = document.getElementById('categoryBgPreview');
                    preview.style.backgroundImage = `url('${categoryBgImageData}')`;
                    preview.innerHTML = '';
                    preview.classList.add('has-image');
                };
                reader.readAsDataURL(file);
            }
        }

        function getCategoryBackgroundStyle(category) {
            if (!category) return 'background: white;';
            
            if (category.backgroundType === 'gradient') {
                return `background: linear-gradient(135deg, ${category.gradientColor1 || '#667eea'}, ${category.gradientColor2 || '#764ba2'});`;
            } else if (category.backgroundType === 'color') {
                return `background: ${category.backgroundColor || '#667eea'};`;
            } else if (category.backgroundType === 'image' && category.backgroundImage) {
                return `background: url('${category.backgroundImage}') center/cover;`;
            } else {
                return `background: linear-gradient(135deg, #667eea, #764ba2);`;
            }
        }

        // ==================== –ò–ú–ü–û–†–¢ –¢–û–í–ê–†–û–í ====================
        function importExcel(file) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    const data = new Uint8Array(e.target.result);
                    const workbook = XLSX.read(data, { type: 'array' });
                    
                    const firstSheetName = workbook.SheetNames[0];
                    const worksheet = workbook.Sheets[firstSheetName];
                    const jsonData = XLSX.utils.sheet_to_json(worksheet);
                    
                    if (jsonData.length === 0) {
                        showNotification('‚ùå –§–∞–π–ª –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã—Ö', 'error');
                        return;
                    }
                    
                    let importedCount = 0;
                    let updatedCount = 0;
                    let errorCount = 0;
                    
                    jsonData.forEach((row, index) => {
                        try {
                            const headers = Object.keys(row);
                            const headerMapping = {
                                '–∫–æ–¥_—Ç–æ–≤–∞—Ä–∞': 'id',
                                '–∫–∞—Ç–µ–≥–æ—Ä–∏—è': 'category',
                                '–Ω–∞–∑–≤–∞–Ω–∏–µ': 'name',
                                '–±—Ä–µ–Ω–¥': 'brand', 
                                '–æ–ø–∏—Å–∞–Ω–∏–µ': 'description',
                                '—Ü–µ–Ω–∞_–∑–∞–∫—É–ø–∫–∏': 'purchase_price',
                                '—Ü–µ–Ω–∞_–ø—Ä–æ–¥–∞–∂–∏': 'sale_price',
                                '—Ü–µ–Ω–∞': 'price',
                                '–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ': 'quantity',
                                '—Å—Ç–∞—Ç—É—Å': 'status',
                                '—Å—Å—ã–ª–∫–∞_–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ': 'image_url',
                                '–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ': 'image'
                            };
                            
                            const productData = {};
                            headers.forEach(header => {
                                const cleanHeader = header.trim().toLowerCase();
                                const mappedHeader = headerMapping[cleanHeader] || cleanHeader;
                                productData[mappedHeader] = row[header];
                            });
                            
                            if (!productData.name || !productData.category) {
                                errorCount++;
                                return;
                            }
                            
                            let productId;
                            if (productData.id && productData.id.toString().startsWith('PROD-')) {
                                productId = parseInt(productData.id.toString().replace('PROD-', '')) || Date.now() + index;
                            } else {
                                productId = Date.now() + index;
                            }
                            
                            const price = productData.price || productData.sale_price || 0;
                            const quantity = productData.quantity || 0;
                            
                            const newProduct = {
                                id: productId,
                                name: productData.name.toString(),
                                category: productData.category.toString(),
                                price: parseInt(price) || 0,
                                oldPrice: null,
                                quantity: parseInt(quantity) || 0,
                                status: (productData.status || 'in_stock').toString().toLowerCase(),
                                description: (productData.description || '–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞').toString(),
                                image: (productData.image_url || productData.image || 'https://via.placeholder.com/300x200/ecf0f1/7f8c8d?text=–ù–µ—Ç+–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è').toString()
                            };
                            
                            const existingIndex = products.findIndex(p => p.id === newProduct.id);
                            if (existingIndex !== -1) {
                                products[existingIndex] = newProduct;
                                updatedCount++;
                            } else {
                                products.push(newProduct);
                                importedCount++;
                            }
                            
                        } catch (error) {
                            errorCount++;
                        }
                    });
                    
                    localStorage.setItem('products', JSON.stringify(products));
                    filteredProducts = [...products];
                    loadAllProducts();
                    updateCategoriesFilter();
                    showImportStats(importedCount, updatedCount, errorCount);
                    
                } catch (error) {
                    showNotification('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ —Ñ–∞–π–ª–∞', 'error');
                }
            };
            
            reader.readAsArrayBuffer(file);
        }

        function importProducts(file) {
            if (!file) return;

            const fileExtension = file.name.split('.').pop().toLowerCase();
            
            if (fileExtension === 'xlsx') {
                importExcel(file);
            } else if (fileExtension === 'csv') {
                // –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º Excel –∏–º–ø–æ—Ä—Ç –¥–ª—è CSV
                importExcel(file);
            } else {
                showNotification('‚ùå –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ CSV –∏ XLSX —Ñ–∞–π–ª—ã', 'error');
            }
        }

        function showImportStats(imported, updated, errors) {
            let message = `‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω! –î–æ–±–∞–≤–ª–µ–Ω–æ: ${imported}, –û–±–Ω–æ–≤–ª–µ–Ω–æ: ${updated}`;
            if (errors > 0) {
                message += `, –û—à–∏–±–æ–∫: ${errors}`;
            }
            showNotification(message, 'success');
        }

        // ==================== –°–£–©–ï–°–¢–í–£–Æ–©–ò–ï –§–£–ù–ö–¶–ò–ò ====================
        // –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ homemaster-shop.html –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
        // Image handling functions
        function handleProductImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    productImageData = e.target.result;
                    updateProductImagePreview(productImageData);
                };
                reader.readAsDataURL(file);
            }
        }

        function handleCategoryImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    categoryImageData = e.target.result;
                    updateCategoryImagePreview(categoryImageData);
                };
                reader.readAsDataURL(file);
            }
        }

        function updateProductImagePreview(imageData) {
            const preview = document.getElementById('productImagePreview');
            preview.innerHTML = '<img src="' + imageData + '" alt="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä">';
        }

        function updateCategoryImagePreview(imageData) {
            const preview = document.getElementById('categoryImagePreview');
            preview.innerHTML = '<img src="' + imageData + '" alt="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä">';
        }

        function clearProductImage() {
            productImageData = null;
            document.getElementById('productImagePreview').innerHTML = 
                '<div class="image-preview-placeholder">' +
                '<i>üì∑</i>' +
                '<div>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ</div>' +
                '</div>';
            document.getElementById('productImageUpload').value = '';
        }

        function clearCategoryImage() {
            categoryImageData = null;
            document.getElementById('categoryImagePreview').innerHTML = 
                '<div class="image-preview-placeholder">' +
                '<i>üì∑</i>' +
                '<div>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ</div>' +
                '</div>';
            document.getElementById('categoryImageUpload').value = '';
        }

        function useDefaultProductImage() {
            productImageData = 'https://via.placeholder.com/300x200?text=–¢–æ–≤–∞—Ä';
            updateProductImagePreview(productImageData);
        }

        function useDefaultCategoryImage() {
            categoryImageData = 'https://via.placeholder.com/300x200?text=–ö–∞—Ç–µ–≥–æ—Ä–∏—è';
            updateCategoryImagePreview(categoryImageData);
        }

        // Site settings functions
        function loadSiteSettings() {
            const settings = JSON.parse(localStorage.getItem('siteSettings')) || {};
            
            // Apply color scheme
            if (settings.primaryColor) {
                document.documentElement.style.setProperty('--primary', settings.primaryColor);
            }
            if (settings.secondaryColor) {
                document.documentElement.style.setProperty('--secondary', settings.secondaryColor);
            }
            if (settings.accentColor) {
                document.documentElement.style.setProperty('--accent', settings.accentColor);
            }
            
            // Apply font size
            if (settings.fontSize) {
                document.body.style.fontSize = settings.fontSize;
                document.getElementById('fontSize').value = settings.fontSize;
            }
            
            // Apply border radius
            if (settings.borderRadius) {
                document.documentElement.style.setProperty('--radius', settings.borderRadius);
                document.getElementById('borderRadius').value = settings.borderRadius;
            }
            
            // Apply content
            if (settings.heroTitle) {
                document.getElementById('heroTitle').textContent = settings.heroTitle;
                document.getElementById('editHeroTitle').value = settings.heroTitle;
            }
            if (settings.heroText) {
                document.getElementById('heroText').textContent = settings.heroText;
                document.getElementById('editHeroText').value = settings.heroText;
            }
            if (settings.aboutText) {
                document.getElementById('aboutText').textContent = settings.aboutText;
                document.getElementById('editAboutText').value = settings.aboutText;
            }
        }

        function saveSiteSettings() {
            const settings = {
                primaryColor: getComputedStyle(document.documentElement).getPropertyValue('--primary').trim(),
                secondaryColor: getComputedStyle(document.documentElement).getPropertyValue('--secondary').trim(),
                accentColor: getComputedStyle(document.documentElement).getPropertyValue('--accent').trim(),
                fontSize: document.body.style.fontSize || '16px',
                borderRadius: getComputedStyle(document.documentElement).getPropertyValue('--radius').trim(),
                heroTitle: document.getElementById('editHeroTitle').value,
                heroText: document.getElementById('editHeroText').value,
                aboutText: document.getElementById('editAboutText').value,
                backgroundType: siteSettings.backgroundType,
                backgroundColor: siteSettings.backgroundColor,
                gradientColor1: siteSettings.gradientColor1,
                gradientColor2: siteSettings.gradientColor2,
                backgroundImage: siteSettings.backgroundImage,
                backgroundUrl: siteSettings.backgroundUrl
            };
            
            localStorage.setItem('siteSettings', JSON.stringify(settings));
            siteSettings = settings;
        }

        function changeColorScheme(primary, secondary, accent) {
            document.documentElement.style.setProperty('--primary', primary);
            document.documentElement.style.setProperty('--secondary', secondary);
            document.documentElement.style.setProperty('--accent', accent);
            
            // Update active color in picker
            document.querySelectorAll('.color-option').forEach(function(option) {
                option.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function changeFontSize(size) {
            document.body.style.fontSize = size;
        }

        function changeBorderRadius(radius) {
            document.documentElement.style.setProperty('--radius', radius);
        }

        function saveContentChanges() {
            document.getElementById('heroTitle').textContent = document.getElementById('editHeroTitle').value;
            document.getElementById('heroText').textContent = document.getElementById('editHeroText').value;
            document.getElementById('aboutText').textContent = document.getElementById('editAboutText').value;
            
            saveSiteSettings();
            showNotification('–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!', 'success');
        }

        function saveDesignChanges() {
            saveSiteSettings();
            showNotification('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!', 'success');
        }

        function saveAdminEmail() {
            adminEmail = document.getElementById('adminEmail').value;
            localStorage.setItem('adminEmail', adminEmail);
            showNotification('Email –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω!', 'success');
        }

        // Service request functions
        function showServiceRequestModal(serviceId) {
            currentServiceId = serviceId;
            document.getElementById('serviceRequestName').value = '';
            document.getElementById('serviceRequestPhone').value = '';
            document.getElementById('serviceRequestEmail').value = '';
            document.getElementById('serviceRequestMessage').value = '';
            document.getElementById('serviceRequestModal').style.display = 'flex';
        }

        function submitServiceRequest() {
            const name = document.getElementById('serviceRequestName').value;
            const phone = document.getElementById('serviceRequestPhone').value;
            const email = document.getElementById('serviceRequestEmail').value;
            const message = document.getElementById('serviceRequestMessage').value;
            const service = services.find(s => s.id === currentServiceId);

            if (!name || !phone) {
                showNotification('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (–∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω)', 'error');
                return;
            }

            // Save service request
            const newRequest = {
                id: serviceRequests.length > 0 ? Math.max(...serviceRequests.map(r => r.id)) + 1 : 1,
                serviceId: currentServiceId,
                serviceName: service ? service.name : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —É—Å–ª—É–≥–∞',
                name: name,
                phone: phone,
                email: email,
                message: message,
                date: new Date().toISOString(),
                status: 'new'
            };

            serviceRequests.push(newRequest);
            saveData('serviceRequests', serviceRequests);

            // Send email notification if admin email is set
            if (adminEmail) {
                sendServiceRequestEmail(newRequest);
            }

            closeModal('serviceRequestModal');
            showNotification('–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.', 'success');
        }

        function sendServiceRequestEmail(request) {
            // In a real application, this would send an actual email
            // For demo purposes, we'll just log it and show a notification
            console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏ –Ω–∞ email:', adminEmail);
            console.log('–î–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏:', request);
            
            // Simulate email sending
            showNotification('–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ email: ' + adminEmail, 'info');
        }

        // Cart functions
        function addToCart(productId) {
            const product = products.find(function(p) { 
                return p.id === productId; 
            });
            
            if (!product) return;
            
            // Check if product already in cart
            const existingItem = cart.find(function(item) { 
                return item.id === productId; 
            });
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image,
                    quantity: 1
                });
            }
            
            saveData('cart', cart);
            updateCartCount();
            showNotification('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!', 'success');
        }

        function removeFromCart(productId) {
            cart = cart.filter(function(item) { 
                return item.id !== productId; 
            });
            saveData('cart', cart);
            updateCartCount();
            updateCartPanel();
            updateCartPage();
            showNotification('–¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã', 'info');
        }

        function updateCartCount() {
            const cartCount = document.getElementById('cartCount');
            const totalItems = cart.reduce(function(total, item) {
                return total + item.quantity;
            }, 0);
            cartCount.textContent = totalItems;
        }

        function toggleCartPanel() {
            const cartPanel = document.getElementById('cartPanel');
            
            if (cartPanel.classList.contains('open')) {
                cartPanel.classList.remove('open');
            } else {
                cartPanel.classList.add('open');
                updateCartPanel();
            }
        }

        function updateCartPanel() {
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            const cartActions = document.getElementById('cartActions');
            const totalAmount = document.getElementById('totalAmount');
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="empty-cart"><p>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p></div>';
                cartTotal.style.display = 'none';
                cartActions.style.display = 'none';
                return;
            }
            
            let itemsHTML = '';
            let total = 0;
            
            cart.forEach(function(item) {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                itemsHTML += 
                    '<div class="cart-item">' +
                    '<img src="' + item.image + '" alt="' + item.name + '" class="cart-item-image">' +
                    '<div class="cart-item-details">' +
                    '<div class="cart-item-name">' + item.name + '</div>' +
                    '<div class="cart-item-price">' + item.price + ' ‚ÇΩ x ' + item.quantity + ' = ' + itemTotal + ' ‚ÇΩ</div>' +
                    '<div class="cart-item-quantity">' +
                    '<button class="quantity-btn" onclick="updateCartQuantity(' + item.id + ', ' + (item.quantity - 1) + ')">-</button>' +
                    '<span>' + item.quantity + '</span>' +
                    '<button class="quantity-btn" onclick="updateCartQuantity(' + item.id + ', ' + (item.quantity + 1) + ')">+</button>' +
                    '<button class="btn btn-sm btn-danger" style="margin-left: 1rem;" onclick="removeFromCart(' + item.id + ')">–£–¥–∞–ª–∏—Ç—å</button>' +
                    '</div>' +
                    '</div>' +
                    '</div>';
            });
            
            cartItems.innerHTML = itemsHTML;
            totalAmount.textContent = total + ' ‚ÇΩ';
            cartTotal.style.display = 'flex';
            cartActions.style.display = 'flex';
        }

        function updateCartQuantity(productId, newQuantity) {
            if (newQuantity < 1) {
                removeFromCart(productId);
                return;
            }
            
            const item = cart.find(function(item) { 
                return item.id === productId; 
            });
            
            if (item) {
                item.quantity = newQuantity;
                saveData('cart', cart);
                updateCartCount();
                updateCartPanel();
                updateCartPage();
            }
        }

        function updateCartPage() {
            const cartPageItems = document.getElementById('cartPageItems');
            const cartPageSummary = document.getElementById('cartPageSummary');
            const cartPageTotalAmount = document.getElementById('cartPageTotalAmount');
            
            if (cart.length === 0) {
                cartPageItems.innerHTML = 
                    '<div class="empty-cart">' +
                    '<p>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>' +
                    '<button class="btn btn-primary" onclick="showProductsPage()">–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º</button>' +
                    '</div>';
                cartPageSummary.style.display = 'none';
                return;
            }
            
            let itemsHTML = '';
            let total = 0;
            
            cart.forEach(function(item) {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                itemsHTML += 
                    '<div class="cart-page-item">' +
                    '<img src="' + item.image + '" alt="' + item.name + '" class="cart-page-item-image">' +
                    '<div class="cart-page-item-details">' +
                    '<div class="cart-page-item-name">' + item.name + '</div>' +
                    '<div class="cart-page-item-price">' + item.price + ' ‚ÇΩ x ' + item.quantity + ' = ' + itemTotal + ' ‚ÇΩ</div>' +
                    '<div class="cart-page-item-quantity">' +
                    '<button class="quantity-btn" onclick="updateCartQuantity(' + item.id + ', ' + (item.quantity - 1) + ')">-</button>' +
                    '<span>' + item.quantity + '</span>' +
                    '<button class="quantity-btn" onclick="updateCartQuantity(' + item.id + ', ' + (item.quantity + 1) + ')">+</button>' +
                    '<button class="btn btn-sm btn-danger" style="margin-left: 1rem;" onclick="removeFromCart(' + item.id + ')">–£–¥–∞–ª–∏—Ç—å</button>' +
                    '</div>' +
                    '</div>' +
                    '</div>';
            });
            
            cartPageItems.innerHTML = itemsHTML;
            cartPageTotalAmount.textContent = total + ' ‚ÇΩ';
            cartPageSummary.style.display = 'block';
        }

        function checkout() {
            if (!currentUser) {
                showAuthModal();
                return;
            }
            
            if (cart.length === 0) {
                showNotification('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞', 'error');
                return;
            }
            
            // Create new order
            const total = cart.reduce(function(sum, item) {
                return sum + (item.price * item.quantity);
            }, 0);
            
            const newOrder = {
                id: orders.length > 0 ? Math.max(...orders.map(function(o) { return o.id; })) + 1 : 1,
                userId: currentUser.id,
                products: cart.map(function(item) {
                    return {
                        id: item.id,
                        name: item.name,
                        quantity: item.quantity,
                        price: item.price
                    };
                }),
                total: total,
                status: 'pending',
                date: new Date().toISOString(),
                address: prompt('–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏:') || '–ù–µ —É–∫–∞–∑–∞–Ω'
            };
            
            orders.push(newOrder);
            saveData('orders', orders);
            
            // Clear cart
            cart = [];
            saveData('cart', cart);
            updateCartCount();
            updateCartPanel();
            updateCartPage();
            toggleCartPanel();
            
            showNotification('–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω!', 'success');
            
            // Update dashboard if open
            if (document.getElementById('dashboardPage').style.display !== 'none') {
                loadDashboardData();
            }
        }

        // Authentication functions
        function showAuthModal() {
            const email = prompt("–í–≤–µ–¥–∏—Ç–µ email:", "admin@homemaster.ru");
            const password = prompt("–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:", "admin123");
            
            if (email && password) {
                if (loginUser(email, password)) {
                    updateUI();
                    showNotification('–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥!', 'success');
                } else {
                    showNotification('–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å', 'error');
                }
            }
        }

        function loginUser(email, password) {
            const user = users.find(function(u) { 
                return u.email === email && u.password === password; 
            });
            if (user) {
                currentUser = user;
                saveData('currentUser', user);
                return true;
            }
            return false;
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateUI();
            showHome();
            showNotification('–í—ã –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã', 'info');
        }

        function updateUI() {
            const authBtn = document.getElementById('authBtn');
            const dashboardBtn = document.getElementById('dashboardBtn');
            const adminBtn = document.getElementById('adminBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            const userWelcome = document.getElementById('userWelcome');
            const adminToggle = document.getElementById('adminToggle');

            if (currentUser) {
                authBtn.style.display = 'none';
                dashboardBtn.style.display = 'inline-block';
                logoutBtn.style.display = 'inline-block';
                userWelcome.textContent = '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + currentUser.name;
                
                if (currentUser.role === 'admin') {
                    adminBtn.style.display = 'inline-block';
                    adminToggle.style.display = 'block';
                } else {
                    adminBtn.style.display = 'none';
                    adminToggle.style.display = 'none';
                }
            } else {
                authBtn.style.display = 'inline-block';
                dashboardBtn.style.display = 'none';
                adminBtn.style.display = 'none';
                logoutBtn.style.display = 'none';
                adminToggle.style.display = 'none';
                userWelcome.textContent = '';
            }
        }

        // Navigation functions
        function showHome() {
            hideAllPages();
            document.getElementById('homeSection').style.display = 'block';
        }

        function showProductsPage() {
            hideAllPages();
            document.getElementById('productsPage').style.display = 'block';
            loadAllProducts();
            updateCategoriesFilter();
        }

        function showServicesPage() {
            hideAllPages();
            document.getElementById('servicesPage').style.display = 'block';
            loadAllServices();
        }

        function showCartPage() {
            hideAllPages();
            document.getElementById('cartPage').style.display = 'block';
            updateCartPage();
        }

        function showAboutPage() {
            hideAllPages();
            document.getElementById('aboutPage').style.display = 'block';
        }

        function showDashboard() {
            if (!currentUser) {
                showAuthModal();
                return;
            }
            hideAllPages();
            document.getElementById('dashboardPage').style.display = 'block';
            loadDashboardData();
        }

        function hideAllPages() {
            const pages = ['homeSection', 'productsPage', 'servicesPage', 'cartPage', 'aboutPage', 'dashboardPage'];
            pages.forEach(function(page) {
                document.getElementById(page).style.display = 'none';
            });
        }

        function toggleAdminPanel() {
            const adminPanel = document.getElementById('adminPanel');
            const editModeIndicator = document.getElementById('editModeIndicator');
            
            if (adminPanel.classList.contains('open')) {
                adminPanel.classList.remove('open');
                editModeIndicator.style.display = 'none';
                editMode = false;
            } else {
                adminPanel.classList.add('open');
                editModeIndicator.style.display = 'block';
                editMode = true;
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–æ–Ω–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–∞–Ω–µ–ª–∏
                loadBackgroundSettings();
            }
        }

        // Dashboard functions
        function loadDashboardData() {
            if (!currentUser) return;

            // Load user info
            document.getElementById('userInfo').innerHTML = 
                '<div class="user-info-item">' +
                '<span class="user-info-label">–ò–º—è:</span>' +
                '<span class="user-info-value">' + currentUser.name + '</span>' +
                '</div>' +
                '<div class="user-info-item">' +
                '<span class="user-info-label">Email:</span>' +
                '<span class="user-info-value">' + currentUser.email + '</span>' +
                '</div>' +
                '<div class="user-info-item">' +
                '<span class="user-info-label">–¢–µ–ª–µ—Ñ–æ–Ω:</span>' +
                '<span class="user-info-value">' + (currentUser.phone || '–ù–µ —É–∫–∞–∑–∞–Ω') + '</span>' +
                '</div>' +
                '<div class="user-info-item">' +
                '<span class="user-info-label">–†–æ–ª—å:</span>' +
                '<span class="user-info-value">' + (currentUser.role === 'admin' ? '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' : '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å') + '</span>' +
                '</div>';

            // Load user orders
            const userOrders = orders.filter(function(order) { 
                return order.userId === currentUser.id; 
            });
            const totalOrders = userOrders.length;
            const completedOrders = userOrders.filter(function(order) { 
                return order.status === 'completed'; 
            }).length;
            const pendingOrders = userOrders.filter(function(order) { 
                return order.status === 'pending'; 
            }).length;

            document.getElementById('totalOrders').textContent = totalOrders;
            document.getElementById('completedOrders').textContent = completedOrders;
            document.getElementById('pendingOrders').textContent = pendingOrders;
            document.getElementById('registrationDate').textContent = new Date(currentUser.registrationDate).toLocaleDateString('ru-RU');

            // Load orders history
            const ordersHistory = document.getElementById('ordersHistory');
            if (userOrders.length > 0) {
                let ordersHTML = '';
                userOrders.forEach(function(order) {
                    ordersHTML += 
                        '<div class="order-item">' +
                        '<div class="order-header">' +
                        '<strong>–ó–∞–∫–∞–∑ #' + order.id + '</strong>' +
                        '<span class="order-status status-' + order.status + '">' +
                        (order.status === 'completed' ? '–í—ã–ø–æ–ª–Ω–µ–Ω' : 
                         order.status === 'pending' ? '–í –æ–±—Ä–∞–±–æ—Ç–∫–µ' : '–û—Ç–º–µ–Ω–µ–Ω') +
                        '</span>' +
                        '</div>' +
                        '<div>–î–∞—Ç–∞: ' + new Date(order.date).toLocaleDateString('ru-RU') + '</div>' +
                        '<div>–ê–¥—Ä–µ—Å: ' + order.address + '</div>' +
                        '<div>–¢–æ–≤–∞—Ä—ã: ' + order.products.map(function(p) { 
                            return p.name + ' (' + p.quantity + ' —à—Ç.)'; 
                        }).join(', ') + '</div>' +
                        '<div><strong>–ò—Ç–æ–≥–æ: ' + order.total + ' ‚ÇΩ</strong></div>' +
                        '</div>';
                });
                ordersHistory.innerHTML = ordersHTML;
            } else {
                ordersHistory.innerHTML = '<p style="text-align: center; color: var(--accent);">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</p>';
            }
        }

        function showEditProfileModal() {
            document.getElementById('editName').value = currentUser.name;
            document.getElementById('editEmail').value = currentUser.email;
            document.getElementById('editPhone').value = currentUser.phone || '';
            document.getElementById('editPassword').value = '';
            document.getElementById('editProfileModal').style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            // Reset editing states and images
            editingProductId = null;
            editingServiceId = null;
            editingCategoryId = null;
            currentServiceId = null;
            productImageData = null;
            categoryImageData = null;
            categoryBgImageData = null;
            clearProductImage();
            clearCategoryImage();
        }

        function saveProfileChanges() {
            const name = document.getElementById('editName').value;
            const email = document.getElementById('editEmail').value;
            const phone = document.getElementById('editPhone').value;
            const password = document.getElementById('editPassword').value;

            if (!name || !email) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
                return;
            }

            // Update user data
            const userIndex = users.findIndex(function(u) { 
                return u.id === currentUser.id; 
            });
            if (userIndex !== -1) {
                users[userIndex].name = name;
                users[userIndex].email = email;
                users[userIndex].phone = phone;
                
                if (password) {
                    users[userIndex].password = password;
                }

                saveData('users', users);
                
                // Update current user
                currentUser = users[userIndex];
                saveData('currentUser', currentUser);
                
                updateUI();
                loadDashboardData();
                closeModal('editProfileModal');
                showNotification('–ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω', 'success');
            }
        }

        // Product Management
        function showAddProductModal() {
            editingProductId = null;
            productImageData = null;
            document.getElementById('productModalTitle').textContent = '–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä';
            document.getElementById('productName').value = '';
            document.getElementById('productPrice').value = '';
            document.getElementById('productStock').value = '';
            document.getElementById('productDescription').value = '';
            clearProductImage();
            
            // Load categories
            const categorySelect = document.getElementById('productCategory');
            categorySelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>';
            categories.forEach(function(category) {
                categorySelect.innerHTML += '<option value="' + category.id + '">' + category.name + '</option>';
            });
            
            document.getElementById('productModal').style.display = 'flex';
        }

        function showEditProductModal(productId) {
            const product = products.find(function(p) { 
                return p.id === productId; 
            });
            if (!product) return;
            
            editingProductId = productId;
            productImageData = product.image;
            document.getElementById('productModalTitle').textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä';
            document.getElementById('productName').value = product.name;
            document.getElementById('productPrice').value = product.price;
            document.getElementById('productStock').value = product.stock;
            document.getElementById('productDescription').value = product.description;
            
            // Update image preview
            if (product.image) {
                updateProductImagePreview(product.image);
            } else {
                clearProductImage();
            }
            
            // Load categories
            const categorySelect = document.getElementById('productCategory');
            categorySelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>';
            categories.forEach(function(category) {
                const selected = category.id === product.category ? 'selected' : '';
                categorySelect.innerHTML += '<option value="' + category.id + '" ' + selected + '>' + category.name + '</option>';
            });
            
            document.getElementById('productModal').style.display = 'flex';
        }

        function saveProduct() {
            const name = document.getElementById('productName').value;
            const category = parseInt(document.getElementById('productCategory').value);
            const price = parseInt(document.getElementById('productPrice').value);
            const stock = parseInt(document.getElementById('productStock').value);
            const description = document.getElementById('productDescription').value;

            if (!name || !category || !price || !stock || !description) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
                return;
            }

            // Use uploaded image or default placeholder
            const image = productImageData || 'https://via.placeholder.com/300x200?text=–¢–æ–≤–∞—Ä';

            if (editingProductId) {
                // Update existing product
                const productIndex = products.findIndex(function(p) { 
                    return p.id === editingProductId; 
                });
                if (productIndex !== -1) {
                    products[productIndex] = {
                        ...products[productIndex],
                        name: name,
                        category: category,
                        price: price,
                        stock: stock,
                        description: description,
                        image: image
                    };
                }
            } else {
                // Add new product
                const newId = products.length > 0 ? Math.max(...products.map(function(p) { return p.id; })) + 1 : 1;
                products.push({
                    id: newId,
                    name: name,
                    category: category,
                    price: price,
                    stock: stock,
                    description: description,
                    image: image,
                    parameters: {},
                    enabled: true
                });
            }

            saveData('products', products);
            closeModal('productModal');
            showNotification(editingProductId ? '–¢–æ–≤–∞—Ä –æ–±–Ω–æ–≤–ª–µ–Ω' : '–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω', 'success');
            
            // Refresh products if on products page
            if (document.getElementById('productsPage').style.display !== 'none') {
                loadAllProducts();
            }
        }

        function deleteProduct(productId) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä?')) {
                products = products.filter(function(p) { 
                    return p.id !== productId; 
                });
                saveData('products', products);
                showNotification('–¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω', 'success');
                showProductList();
            }
        }

        function showProductList() {
            const tableBody = document.getElementById('productListTable');
            tableBody.innerHTML = '';
            
            products.forEach(function(product) {
                const category = categories.find(function(c) { 
                    return c.id === product.category; 
                });
                tableBody.innerHTML += 
                    '<tr>' +
                    '<td><img src="' + product.image + '" alt="' + product.name + '" class="table-image"></td>' +
                    '<td class="table-name-cell">' + product.name + '</td>' +
                    '<td class="table-price-cell">' + product.price + ' ‚ÇΩ</td>' +
                    '<td class="table-category-cell">' + (category ? category.name : '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏') + '</td>' +
                    '<td class="table-actions-cell">' +
                    '<div class="action-buttons">' +
                    '<button class="btn btn-sm" onclick="showEditProductModal(' + product.id + ')">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>' +
                    '<button class="btn btn-sm btn-danger" onclick="deleteProduct(' + product.id + ')">–£–¥–∞–ª–∏—Ç—å</button>' +
                    '</div>' +
                    '</td>' +
                    '</tr>';
            });
            
            document.getElementById('productListModal').style.display = 'flex';
        }

        // Service Management
        function showAddServiceModal() {
            editingServiceId = null;
            document.getElementById('serviceModalTitle').textContent = '–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É';
            document.getElementById('serviceName').value = '';
            document.getElementById('serviceIcon').value = '';
            document.getElementById('serviceDescription').value = '';
            document.getElementById('serviceModal').style.display = 'flex';
        }

        function showEditServiceModal(serviceId) {
            const service = services.find(function(s) { 
                return s.id === serviceId; 
            });
            if (!service) return;
            
            editingServiceId = serviceId;
            document.getElementById('serviceModalTitle').textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Å–ª—É–≥—É';
            document.getElementById('serviceName').value = service.name;
            document.getElementById('serviceIcon').value = service.icon;
            document.getElementById('serviceDescription').value = service.description;
            document.getElementById('serviceModal').style.display = 'flex';
        }

        function saveService() {
            const name = document.getElementById('serviceName').value;
            const icon = document.getElementById('serviceIcon').value;
            const description = document.getElementById('serviceDescription').value;

            if (!name || !icon || !description) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
                return;
            }

            if (editingServiceId) {
                // Update existing service
                const serviceIndex = services.findIndex(function(s) { 
                    return s.id === editingServiceId; 
                });
                if (serviceIndex !== -1) {
                    services[serviceIndex] = {
                        ...services[serviceIndex],
                        name: name,
                        icon: icon,
                        description: description
                    };
                }
            } else {
                // Add new service
                const newId = services.length > 0 ? Math.max(...services.map(function(s) { return s.id; })) + 1 : 1;
                services.push({
                    id: newId,
                    name: name,
                    icon: icon,
                    description: description
                });
            }

            saveData('services', services);
            closeModal('serviceModal');
            showNotification(editingServiceId ? '–£—Å–ª—É–≥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞' : '–£—Å–ª—É–≥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞', 'success');
            
            // Refresh services if on services page
            if (document.getElementById('servicesPage').style.display !== 'none') {
                loadAllServices();
            }
        }

        function deleteService(serviceId) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É —É—Å–ª—É–≥—É?')) {
                services = services.filter(function(s) { 
                    return s.id !== serviceId; 
                });
                saveData('services', services);
                showNotification('–£—Å–ª—É–≥–∞ —É–¥–∞–ª–µ–Ω–∞', 'success');
                showServiceList();
            }
        }

        function showServiceList() {
            const tableBody = document.getElementById('serviceListTable');
            tableBody.innerHTML = '';
            
            services.forEach(function(service) {
                tableBody.innerHTML += 
                    '<tr>' +
                    '<td class="table-name-cell">' + service.name + '</td>' +
                    '<td>' + service.icon + '</td>' +
                    '<td class="table-actions-cell">' +
                    '<div class="action-buttons">' +
                    '<button class="btn btn-sm" onclick="showEditServiceModal(' + service.id + ')">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>' +
                    '<button class="btn btn-sm btn-danger" onclick="deleteService(' + service.id + ')">–£–¥–∞–ª–∏—Ç—å</button>' +
                    '</div>' +
                    '</td>' +
                    '</tr>';
            });
            
            document.getElementById('serviceListModal').style.display = 'flex';
        }

        // Category Management
        function showAddCategoryModal() {
            editingCategoryId = null;
            categoryImageData = null;
            categoryBgImageData = null;
            document.getElementById('categoryModalTitle').textContent = '–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é';
            document.getElementById('categoryName').value = '';
            document.getElementById('categoryIcon').value = '';
            document.getElementById('categoryDescription').value = '';
            document.getElementById('categoryBgType').value = 'gradient';
            document.getElementById('categoryBgColor').value = '#667eea';
            document.getElementById('categoryGradientColor1').value = '#667eea';
            document.getElementById('categoryGradientColor2').value = '#764ba2';
            clearCategoryImage();
            
            const bgPreview = document.getElementById('categoryBgPreview');
            bgPreview.style.backgroundImage = '';
            bgPreview.innerHTML = '–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏';
            bgPreview.classList.remove('has-image');
            
            toggleCategoryBackgroundOptions();
            document.getElementById('categoryModal').style.display = 'flex';
        }

        function showEditCategoryModal(categoryId) {
            const category = categories.find(function(c) { 
                return c.id === categoryId; 
            });
            if (!category) return;
            
            editingCategoryId = categoryId;
            categoryImageData = category.image;
            categoryBgImageData = category.backgroundImage;
            document.getElementById('categoryModalTitle').textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é';
            document.getElementById('categoryName').value = category.name;
            document.getElementById('categoryIcon').value = category.icon;
            document.getElementById('categoryDescription').value = category.description;
            document.getElementById('categoryBgType').value = category.backgroundType || 'gradient';
            document.getElementById('categoryBgColor').value = category.backgroundColor || '#667eea';
            document.getElementById('categoryGradientColor1').value = category.gradientColor1 || '#667eea';
            document.getElementById('categoryGradientColor2').value = category.gradientColor2 || '#764ba2';
            
            // Update image preview
            if (category.image) {
                updateCategoryImagePreview(category.image);
            } else {
                clearCategoryImage();
            }
            
            // Update background preview
            const bgPreview = document.getElementById('categoryBgPreview');
            if (category.backgroundType === 'image' && category.backgroundImage) {
                bgPreview.style.backgroundImage = `url('${category.backgroundImage}')`;
                bgPreview.innerHTML = '';
                bgPreview.classList.add('has-image');
            } else {
                bgPreview.style.backgroundImage = '';
                bgPreview.innerHTML = '–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏';
                bgPreview.classList.remove('has-image');
            }
            
            toggleCategoryBackgroundOptions();
            document.getElementById('categoryModal').style.display = 'flex';
        }

        function saveCategory() {
            const name = document.getElementById('categoryName').value;
            const icon = document.getElementById('categoryIcon').value;
            const description = document.getElementById('categoryDescription').value;
            const bgType = document.getElementById('categoryBgType').value;

            if (!name || !icon || !description) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
                return;
            }

            // Use uploaded image or default placeholder
            const image = categoryImageData || 'https://via.placeholder.com/300x200?text=–ö–∞—Ç–µ–≥–æ—Ä–∏—è';
            
            // Get background settings
            const backgroundColor = document.getElementById('categoryBgColor').value;
            const gradientColor1 = document.getElementById('categoryGradientColor1').value;
            const gradientColor2 = document.getElementById('categoryGradientColor2').value;
            const backgroundImage = categoryBgImageData || '';

            if (editingCategoryId) {
                // Update existing category
                const categoryIndex = categories.findIndex(function(c) { 
                    return c.id === editingCategoryId; 
                });
                if (categoryIndex !== -1) {
                    categories[categoryIndex] = {
                        ...categories[categoryIndex],
                        name: name,
                        icon: icon,
                        description: description,
                        image: image,
                        backgroundType: bgType,
                        backgroundColor: backgroundColor,
                        gradientColor1: gradientColor1,
                        gradientColor2: gradientColor2,
                        backgroundImage: backgroundImage
                    };
                }
            } else {
                // Add new category
                const newId = categories.length > 0 ? Math.max(...categories.map(function(c) { return c.id; })) + 1 : 1;
                categories.push({
                    id: newId,
                    name: name,
                    icon: icon,
                    description: description,
                    image: image,
                    backgroundType: bgType,
                    backgroundColor: backgroundColor,
                    gradientColor1: gradientColor1,
                    gradientColor2: gradientColor2,
                    backgroundImage: backgroundImage
                });
            }

            saveData('categories', categories);
            closeModal('categoryModal');
            showNotification(editingCategoryId ? '–ö–∞—Ç–µ–≥–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞' : '–ö–∞—Ç–µ–≥–æ—Ä–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞', 'success');
            
            // Refresh categories if on home page
            if (document.getElementById('homeSection').style.display !== 'none') {
                loadHomePage();
            }
        }

        function deleteCategory(categoryId) {
            // Check if category is used in products
            const usedInProducts = products.some(function(p) { 
                return p.category === categoryId; 
            });
            if (usedInProducts) {
                showNotification('–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–æ–≤–∞—Ä–∞—Ö', 'error');
                return;
            }

            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∫–∞—Ç–µ–≥–æ—Ä–∏—é?')) {
                categories = categories.filter(function(c) { 
                    return c.id !== categoryId; 
                });
                saveData('categories', categories);
                showNotification('–ö–∞—Ç–µ–≥–æ—Ä–∏—è —É–¥–∞–ª–µ–Ω–∞', 'success');
                showCategoryList();
            }
        }

        function showCategoryList() {
            const tableBody = document.getElementById('categoryListTable');
            tableBody.innerHTML = '';
            
            categories.forEach(function(category) {
                tableBody.innerHTML += 
                    '<tr>' +
                    '<td><img src="' + category.image + '" alt="' + category.name + '" class="table-image"></td>' +
                    '<td class="table-name-cell">' + category.name + '</td>' +
                    '<td>' + category.icon + '</td>' +
                    '<td class="table-actions-cell">' +
                    '<div class="action-buttons">' +
                    '<button class="btn btn-sm" onclick="showEditCategoryModal(' + category.id + ')">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>' +
                    '<button class="btn btn-sm btn-danger" onclick="deleteCategory(' + category.id + ')">–£–¥–∞–ª–∏—Ç—å</button>' +
                    '</div>' +
                    '</td>' +
                    '</tr>';
            });
            
            document.getElementById('categoryListModal').style.display = 'flex';
        }

        // Load content functions
        function loadHomePage() {
            const dynamicSections = document.getElementById('dynamicSections');
            let servicesHTML = services.map(function(service) {
                return '<div class="service-card">' +
                       '<div class="service-icon">' + service.icon + '</div>' +
                       '<h3 class="service-name">' + service.name + '</h3>' +
                       '<p class="service-description">' + service.description + '</p>' +
                       '<button class="btn" style="margin-top: 1rem;" onclick="showServiceRequestModal(' + service.id + ')">–ó–∞–∫–∞–∑–∞—Ç—å —É—Å–ª—É–≥—É</button>' +
                       '</div>';
            }).join('');

            let productsHTML = products.slice(0, 4).map(function(product) {
                const category = categories.find(function(c) { 
                    return c.id === product.category; 
                });
                return '<div class="product-card">' +
                       '<img src="' + product.image + '" alt="' + product.name + '" class="product-image">' +
                       '<div class="category-badge">' +
                       (category ? category.icon + ' ' + category.name : '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏') +
                       '</div>' +
                       '<h3 class="product-name">' + product.name + '</h3>' +
                       '<p class="product-description">' + product.description + '</p>' +
                       '<div class="product-price">' + product.price + ' ‚ÇΩ</div>' +
                       '<button class="btn" onclick="addToCart(' + product.id + ')">–í –∫–æ—Ä–∑–∏–Ω—É</button>' +
                       '</div>';
            }).join('');

            let categoriesHTML = categories.map(function(category) {
                const backgroundStyle = getCategoryBackgroundStyle(category);
                return '<div class="category-card" style="' + backgroundStyle + '">' +
                       '<div class="category-content">' +
                       '<span class="category-icon">' + category.icon + '</span>' +
                       '<h3 class="category-name">' + category.name + '</h3>' +
                       '<p class="category-description">' + category.description + '</p>' +
                       '<div class="category-button">' +
                       '<button class="btn" onclick="filterProducts(' + category.id + ')">–°–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–≤–∞—Ä—ã</button>' +
                       '</div>' +
                       '</div>' +
                       '</div>';
            }).join('');

            dynamicSections.innerHTML = 
                '<section class="section">' +
                '<h2 class="section-title">–ù–∞—à–∏ —É—Å–ª—É–≥–∏</h2>' +
                '<div class="services-grid">' + servicesHTML + '</div>' +
                '</section>' +
                '<section class="section">' +
                '<h2 class="section-title">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã</h2>' +
                '<div class="products-grid">' + productsHTML + '</div>' +
                '<div style="text-align: center; margin-top: 2rem;">' +
                '<button class="btn btn-primary" onclick="showProductsPage()">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã</button>' +
                '</div>' +
                '</section>' +
                '<section class="section">' +
                '<h2 class="section-title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤</h2>' +
                '<div class="categories-grid">' + categoriesHTML + '</div>' +
                '</section>';
        }

        function loadAllProducts() {
            const allProductsContainer = document.getElementById('allProducts');
            let productsHTML = products.map(function(product) {
                const category = categories.find(function(c) { 
                    return c.id === product.category; 
                });
                return '<div class="product-card">' +
                       '<img src="' + product.image + '" alt="' + product.name + '" class="product-image">' +
                       '<div class="category-badge">' +
                       (category ? category.icon + ' ' + category.name : '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏') +
                       '</div>' +
                       '<h3 class="product-name">' + product.name + '</h3>' +
                       '<p class="product-description">' + product.description + '</p>' +
                       '<div class="product-price">' + product.price + ' ‚ÇΩ</div>' +
                       '<button class="btn" onclick="addToCart(' + product.id + ')">–í –∫–æ—Ä–∑–∏–Ω—É</button>' +
                       '</div>';
            }).join('');
            allProductsContainer.innerHTML = productsHTML;
        }

        function searchProducts() {
            const searchTerm = document.getElementById('productSearch').value.toLowerCase();
            const allProductsContainer = document.getElementById('allProducts');
            
            if (!searchTerm) {
                loadAllProducts();
                return;
            }
            
            let filteredProducts = products.filter(function(product) {
                return product.name.toLowerCase().includes(searchTerm) ||
                       product.description.toLowerCase().includes(searchTerm);
            });
            
            let productsHTML = filteredProducts.map(function(product) {
                const category = categories.find(function(c) { 
                    return c.id === product.category; 
                });
                return '<div class="product-card">' +
                       '<img src="' + product.image + '" alt="' + product.name + '" class="product-image">' +
                       '<div class="category-badge">' +
                       (category ? category.icon + ' ' + category.name : '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏') +
                       '</div>' +
                       '<h3 class="product-name">' + product.name + '</h3>' +
                       '<p class="product-description">' + product.description + '</p>' +
                       '<div class="product-price">' + product.price + ' ‚ÇΩ</div>' +
                       '<button class="btn" onclick="addToCart(' + product.id + ')">–í –∫–æ—Ä–∑–∏–Ω—É</button>' +
                       '</div>';
            }).join('');
            
            if (filteredProducts.length === 0) {
                productsHTML = '<div style="grid-column: 1 / -1; text-align: center; padding: 40px;">' +
                              '<h3 style="color: var(--accent);">–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>' +
                              '<p style="color: var(--accent);">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å</p>' +
                              '</div>';
            }
            
            allProductsContainer.innerHTML = productsHTML;
        }

        function filterProducts(categoryId) {
            showProductsPage();
            
            const allProductsContainer = document.getElementById('allProducts');
            let filteredProducts = products;
            
            if (categoryId !== 'all') {
                filteredProducts = products.filter(function(p) { 
                    return p.category === categoryId; 
                });
            }
            
            let productsHTML = filteredProducts.map(function(product) {
                const category = categories.find(function(c) { 
                    return c.id === product.category; 
                });
                return '<div class="product-card">' +
                       '<img src="' + product.image + '" alt="' + product.name + '" class="product-image">' +
                       '<div class="category-badge">' +
                       (category ? category.icon + ' ' + category.name : '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏') +
                       '</div>' +
                       '<h3 class="product-name">' + product.name + '</h3>' +
                       '<p class="product-description">' + product.description + '</p>' +
                       '<div class="product-price">' + product.price + ' ‚ÇΩ</div>' +
                       '<button class="btn" onclick="addToCart(' + product.id + ')">–í –∫–æ—Ä–∑–∏–Ω—É</button>' +
                       '</div>';
            }).join('');
            allProductsContainer.innerHTML = productsHTML;
        }

        function updateCategoriesFilter() {
            const categoriesFilter = document.getElementById('categoriesFilter');
            let filterHTML = '<button class="btn" onclick="filterProducts(\'all\')">–í—Å–µ —Ç–æ–≤–∞—Ä—ã</button>';
            categories.forEach(function(category) {
                filterHTML += '<button class="btn" onclick="filterProducts(' + category.id + ')">' + category.icon + ' ' + category.name + '</button>';
            });
            categoriesFilter.innerHTML = filterHTML;
        }

        function loadAllServices() {
            const allServicesContainer = document.getElementById('allServices');
            let servicesHTML = services.map(function(service) {
                return '<div class="service-card">' +
                       '<div class="service-icon">' + service.icon + '</div>' +
                       '<h3 class="service-name">' + service.name + '</h3>' +
                       '<p class="service-description">' + service.description + '</p>' +
                       '<button class="btn" style="margin-top: 1rem;" onclick="showServiceRequestModal(' + service.id + ')">–ó–∞–∫–∞–∑–∞—Ç—å —É—Å–ª—É–≥—É</button>' +
                       '</div>';
            }).join('');
            allServicesContainer.innerHTML = servicesHTML;
        }

        function showNotification(message, type) {
            if (!type) type = 'info';
            const notification = document.createElement('div');
            notification.className = 'notification ' + type;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(function() {
                notification.remove();
            }, 3000);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initData();
        });

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        window.toggleCategoryBackgroundOptions = toggleCategoryBackgroundOptions;
        window.handleCategoryBackgroundImageUpload = handleCategoryBackgroundImageUpload;
        window.toggleBackgroundOptions = toggleBackgroundOptions;
        window.setGradient = setGradient;
        window.handleBackgroundImageUpload = handleBackgroundImageUpload;
        window.previewBackgroundUrl = previewBackgroundUrl;
        window.applyBackgroundSettings = applyBackgroundSettings;
        window.resetBackground = resetBackground;
        window.importProducts = importProducts;
        window.searchProducts = searchProducts;
    </script>
</body>
</html>
